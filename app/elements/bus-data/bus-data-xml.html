<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="bus-data-xml">
  <style>
    paper-material {
      padding-top: 4px;
      padding-bottom: 4px;
      padding-left: 24px;
    }
  </style>
  <template>

    <paper-material>
      <p>Route: {{routeTitle}}</p>
      <p>Direction: {{directionTitle}}</p>
      <p>Stop: {{stopTitle}}</p>
    </paper-material>
    <p>XML</p>
    <template id="r" is="dom-repeat" items="{{routes}}">
      <paper-material on-tap="routeSelect">
        <p>Route: [[item.title]]</p>
        <!--<p>[[item.route_id]]</p> -->
      </paper-material>
    </template>
    <iron-request id="r"></iron-request>

  </template>

  <script>
    (function() {
      'use strict';
      //{{computeArray(route.directions,route.stops)}}
      Polymer({
        is: 'bus-data-xml',
        properties: {
          url: {type: String, value: 'hi'},
          routeId: String,
          routeTitle: String,
          /*directionId: {
            type: String,
            value: '',
          },
          directionTitle: String,
          stopId: String,
          stopTitle: String, */

        },
        ready: function() {
        },
        routeSelect: function(e) {
          //console.log(e.model.__data__.item.route_id);
          //console.log(e.model.__data__.item.title);
          this.routeId = e.model.__data__.item.route_id;
          this.routeTitle = e.model.__data__.item.title;
          console.log(this.routeId);
          //this.$.stops.render();
          console.log(this.$.r.routes);
        },
        /*directionSelect: function(e) {
          //console.log(e.model.__data__.item.route_id);
          //console.log(e.model.__data__.item.title);
          this.directionId = e.model.__data__.item.direction_id;
          this.directionTitle = e.model.__data__.item.title;
          console.log(this.directionId);

        },
        stopSelect: function(e) {
          console.log(e.model.s.stop_id);
          this.stopId = e.model.__data__.s.stop_id;
          this.stopTitle = e.model.__data__.s.title;
          console.log('stop:' + this.stopId);
          console.log(this.stopTitle);
          this.$.arrivals.url =
            'http://api.umd.io/v0/bus/routes/' + this.routeId + '/arrivals/' + this.stopId;
          console.log(this.$.arrivals.url);
        } */

      });
    })();
  </script>
</dom-module>
